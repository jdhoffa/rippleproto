{"ast":null,"code":"import React,{useContext,memo}from\"react\";import{viewsContext}from\"contexts/viewsContext\";var DropZone=function DropZone(_ref){var view=_ref.view,vertical=_ref.vertical;var _useContext=useContext(viewsContext),dispatch=_useContext.dispatch;var dragOver=function dragOver(ev){ev.preventDefault();};var dragEnter=function dragEnter(ev){var elem=ev.target;setTimeout(function(){return elem.classList.add(\"active\");},1);};var dragLeave=function dragLeave(ev){var elem=ev.target;setTimeout(function(){return elem.classList.remove(\"active\");},1);};var drop=function drop(ev){if(ev.preventDefault)ev.preventDefault();if(ev.stopPropagation)ev.stopPropagation();var dragged=ev.dataTransfer.getData(\"text\");var to=ev.target.getAttribute(\"view\");var pos=ev.target.getAttribute(\"pos\");if(!dragged||!to||!pos)return;// Prevent Highlight bug (staying on area after drop)\nsetTimeout(function(){var MainView=document.getElementById(\"MainView\");MainView.classList.remove(\"drag\");var allDropZones=MainView.querySelectorAll(\".drop-zone div\");allDropZones.forEach(function(el){return el.classList.remove(\"active\");});var draggable=MainView.querySelectorAll(\".drag\");draggable.forEach(function(el){return el.classList.remove(\"drag\");});},1);dispatch({type:\"MOVE_VIEW\",dragged:dragged,to:to,pos:pos,vertical:vertical});};return React.createElement(\"div\",{className:\"drop-zone\"},[\"center\",\"top\",\"right\",\"bottom\",\"left\"].map(function(el){return React.createElement(\"div\",{className:el,key:el,view:view,pos:el,onDragOver:dragOver,onDragEnter:dragEnter,onDragLeave:dragLeave,onDrop:drop});}));};export default memo(DropZone);","map":{"version":3,"sources":["/home/jordi/Documents/ETHZ/Chair_of_systems_design/Ripple/React v4/static/src/components/MainView/DropZone.js"],"names":["React","useContext","memo","viewsContext","DropZone","view","vertical","dispatch","dragOver","ev","preventDefault","dragEnter","elem","target","setTimeout","classList","add","dragLeave","remove","drop","stopPropagation","dragged","dataTransfer","getData","to","getAttribute","pos","MainView","document","getElementById","allDropZones","querySelectorAll","forEach","el","draggable","type","map"],"mappings":"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","sourcesContent":["import React, { useContext, memo } from \"react\";\r\nimport { viewsContext } from \"contexts/viewsContext\";\r\n\r\nconst DropZone = ({ view, vertical }) => {\r\n  const { dispatch } = useContext(viewsContext);\r\n  const dragOver = ev => {\r\n    ev.preventDefault();\r\n  };\r\n  const dragEnter = ev => {\r\n    const elem = ev.target;\r\n    setTimeout(() => elem.classList.add(\"active\"), 1);\r\n  };\r\n\r\n  const dragLeave = ev => {\r\n    const elem = ev.target;\r\n    setTimeout(() => elem.classList.remove(\"active\"), 1);\r\n  };\r\n\r\n  const drop = ev => {\r\n    if (ev.preventDefault) ev.preventDefault();\r\n    if (ev.stopPropagation) ev.stopPropagation();\r\n\r\n    const dragged = ev.dataTransfer.getData(\"text\");\r\n    const to = ev.target.getAttribute(\"view\");\r\n    const pos = ev.target.getAttribute(\"pos\");\r\n    if (!dragged || !to || !pos) return;\r\n\r\n    // Prevent Highlight bug (staying on area after drop)\r\n    setTimeout(() => {\r\n      const MainView = document.getElementById(\"MainView\");\r\n      MainView.classList.remove(\"drag\");\r\n\r\n      const allDropZones = MainView.querySelectorAll(\".drop-zone div\");\r\n      allDropZones.forEach(el => el.classList.remove(\"active\"));\r\n\r\n      const draggable = MainView.querySelectorAll(\".drag\");\r\n      draggable.forEach(el => el.classList.remove(\"drag\"));\r\n    }, 1);\r\n    dispatch({ type: \"MOVE_VIEW\", dragged, to, pos, vertical });\r\n  };\r\n  return (\r\n    <div className=\"drop-zone\">\r\n      {[\"center\", \"top\", \"right\", \"bottom\", \"left\"].map(el => (\r\n        <div\r\n          className={el}\r\n          key={el}\r\n          view={view}\r\n          pos={el}\r\n          onDragOver={dragOver}\r\n          onDragEnter={dragEnter}\r\n          onDragLeave={dragLeave}\r\n          onDrop={drop}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(DropZone);\r\n"]},"metadata":{},"sourceType":"module"}