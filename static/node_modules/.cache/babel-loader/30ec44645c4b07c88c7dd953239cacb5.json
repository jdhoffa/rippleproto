{"ast":null,"code":"import _toConsumableArray from\"/home/jordi/Documents/ETHZ/Chair_of_systems_design/Ripple/Freelance/outputs/version2/dataview (2)/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/jordi/Documents/ETHZ/Chair_of_systems_design/Ripple/Freelance/outputs/version2/dataview (2)/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/home/jordi/Documents/ETHZ/Chair_of_systems_design/Ripple/Freelance/outputs/version2/dataview (2)/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/home/jordi/Documents/ETHZ/Chair_of_systems_design/Ripple/Freelance/outputs/version2/dataview (2)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jordi/Documents/ETHZ/Chair_of_systems_design/Ripple/Freelance/outputs/version2/dataview (2)/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{useState,useEffect}from\"react\";var useFetch=function useFetch(url){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var updateDeps=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var _useState=useState({loading:true,data:null,error:null}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){var abortController=new AbortController();var signal=abortController.signal;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(url,_objectSpread({},options,{signal:signal}));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setState({loading:false,data:data,error:null});_context.next=16;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);if(!(_context.t0.name===\"AbortError\")){_context.next=14;break;}return _context.abrupt(\"return\");case 14:setState({loading:false,data:null,error:_context.t0});throw _context.t0;case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}))();return function(){return abortController.abort();};// eslint-disable-next-line react-hooks/exhaustive-deps\n},_toConsumableArray(updateDeps));var updateData=function updateData(newData){if(state.data instanceof Array||typeof state.data!==\"object\")return setState(_objectSpread({},state,{data:newData}));return setState(_objectSpread({},state,{data:_objectSpread({},state.data,{},newData)}));};return[state.loading,state.data,state.error,updateData];};export default useFetch;","map":{"version":3,"sources":["/home/jordi/Documents/ETHZ/Chair_of_systems_design/Ripple/Freelance/outputs/version2/dataview (2)/src/hooks/useFetch.js"],"names":["useState","useEffect","useFetch","url","options","updateDeps","loading","data","error","state","setState","abortController","AbortController","signal","fetch","response","json","name","abort","updateData","newData","Array"],"mappings":"upDAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,GAAD,CAAwC,IAAlCC,CAAAA,OAAkC,2DAAxB,EAAwB,IAApBC,CAAAA,UAAoB,2DAAP,EAAO,eAC7BL,QAAQ,CAAC,CACjCM,OAAO,CAAE,IADwB,CAEjCC,IAAI,CAAE,IAF2B,CAGjCC,KAAK,CAAE,IAH0B,CAAD,CADqB,wCAChDC,KADgD,eACzCC,QADyC,eAOvDT,SAAS,CAAC,UAAM,CACd,GAAMU,CAAAA,eAAe,CAAG,GAAIC,CAAAA,eAAJ,EAAxB,CADc,GAENC,CAAAA,MAFM,CAEKF,eAFL,CAENE,MAFM,CAId,wDAAC,2LAE0BC,CAAAA,KAAK,CAACX,GAAD,kBAAWC,OAAX,EAAoBS,MAAM,CAANA,MAApB,GAF/B,QAESE,QAFT,qCAGsBA,CAAAA,QAAQ,CAACC,IAAT,EAHtB,QAGST,IAHT,eAIGG,QAAQ,CAAC,CACPJ,OAAO,CAAE,KADF,CAEPC,IAAI,CAAJA,IAFO,CAGPC,KAAK,CAAE,IAHA,CAAD,CAAR,CAJH,sFAUO,YAAMS,IAAN,GAAe,YAVtB,oEAWGP,QAAQ,CAAC,CAAEJ,OAAO,CAAE,KAAX,CAAkBC,IAAI,CAAE,IAAxB,CAA8BC,KAAK,YAAnC,CAAD,CAAR,CAXH,uFAAD,KAgBA,MAAO,kBAAMG,CAAAA,eAAe,CAACO,KAAhB,EAAN,EAAP,CAEA;AACD,CAvBQ,oBAuBFb,UAvBE,EAAT,CAyBA,GAAMc,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAC,OAAO,CAAI,CAC5B,GAAIX,KAAK,CAACF,IAAN,WAAsBc,CAAAA,KAAtB,EAA+B,MAAOZ,CAAAA,KAAK,CAACF,IAAb,GAAsB,QAAzD,CACE,MAAOG,CAAAA,QAAQ,kBACVD,KADU,EAEbF,IAAI,CAAEa,OAFO,GAAf,CAIF,MAAOV,CAAAA,QAAQ,kBACVD,KADU,EAEbF,IAAI,kBAAOE,KAAK,CAACF,IAAb,IAAsBa,OAAtB,CAFS,GAAf,CAID,CAVD,CAYA,MAAO,CAACX,KAAK,CAACH,OAAP,CAAgBG,KAAK,CAACF,IAAtB,CAA4BE,KAAK,CAACD,KAAlC,CAAyCW,UAAzC,CAAP,CACD,CA7CD,CA+CA,cAAejB,CAAAA,QAAf","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst useFetch = (url, options = {}, updateDeps = []) => {\r\n  const [state, setState] = useState({\r\n    loading: true,\r\n    data: null,\r\n    error: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    const abortController = new AbortController();\r\n    const { signal } = abortController;\r\n\r\n    (async () => {\r\n      try {\r\n        const response = await fetch(url, { ...options, signal });\r\n        const data = await response.json();\r\n        setState({\r\n          loading: false,\r\n          data,\r\n          error: null\r\n        });\r\n      } catch (error) {\r\n        if (error.name === \"AbortError\") return;\r\n        setState({ loading: false, data: null, error });\r\n        throw error;\r\n      }\r\n    })();\r\n\r\n    return () => abortController.abort();\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [...updateDeps]);\r\n\r\n  const updateData = newData => {\r\n    if (state.data instanceof Array || typeof state.data !== \"object\")\r\n      return setState({\r\n        ...state,\r\n        data: newData\r\n      });\r\n    return setState({\r\n      ...state,\r\n      data: { ...state.data, ...newData }\r\n    });\r\n  };\r\n\r\n  return [state.loading, state.data, state.error, updateData];\r\n};\r\n\r\nexport default useFetch;\r\n"]},"metadata":{},"sourceType":"module"}